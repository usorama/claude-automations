# Phase 3.2run: Execute & Fix Tests

**🏃 Phase 3 of 5: Quality - Test Execution & Refinement**

## Purpose
Actually RUN the tests created by `/3.2test`, analyze failures, and fix issues iteratively until all tests pass.

## What This Does
1. **Discovers** test commands in package.json/Makefile
2. **Executes** all test suites
3. **Analyzes** failures and errors
4. **Fixes** broken tests or code issues
5. **Re-runs** until all tests pass
6. **Reports** final coverage metrics

## Execution Flow
```bash
# 1. Discover test command
npm test || yarn test || pytest || go test

# 2. Run tests and capture output
npm test 2>&1 | tee test-results.log

# 3. If failures exist:
#    - Analyze error messages
#    - Fix test or implementation
#    - Re-run affected tests
#    - Repeat until green

# 4. Run coverage report
npm run coverage || jest --coverage
```

## Key Actions
- **Run Unit Tests**: Execute and fix all unit tests
- **Run Integration Tests**: Validate component interactions
- **Run E2E Tests**: Ensure user flows work
- **Fix Failures**: Debug and resolve test failures
- **Improve Coverage**: Add tests for uncovered code
- **Performance Check**: Ensure tests run efficiently

## Success Criteria
✅ All tests passing (100% success rate)
✅ Coverage meets threshold (usually >80%)
✅ No flaky tests (consistent results)
✅ Test execution time acceptable (<5 min for unit tests)
✅ CI/CD integration verified

## Common Test Commands
```bash
# JavaScript/TypeScript
npm test
npm run test:unit
npm run test:integration
npm run test:e2e
jest --watch
vitest run

# Python
pytest
python -m unittest
tox

# Go
go test ./...
go test -cover

# Rust
cargo test
```

## Troubleshooting Patterns
1. **Test fails locally but passes in CI**
   - Check environment variables
   - Verify test data/fixtures
   - Review timezone/locale issues

2. **Async test failures**
   - Add proper await/async
   - Increase timeouts
   - Mock external services

3. **Flaky tests**
   - Remove time dependencies
   - Mock random values
   - Isolate test data

## Next Steps
After all tests pass:
1. Generate coverage report
2. Document test strategy with `/3.3docs`
3. Set up CI/CD with `/4.1deploy`
4. Configure monitoring with `/4.2monitor`

**Note**: This command will iterate until all tests pass or user intervenes.